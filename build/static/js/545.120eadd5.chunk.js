"use strict";(self.webpackChunkevan_workshop=self.webpackChunkevan_workshop||[]).push([[545],{3421:function(e,t,r){r.d(t,{OJ:function(){return c},fO:function(){return f},hx:function(){return l},kE:function(){return u},s3:function(){return d}});var n=r(4165),a=r(5861),s=r(6422);function c(e,t){return i.apply(this,arguments)}function i(){return(i=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.TH+"?subreddit="+t+"&lastThing="+r,{method:"GET"});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:"A990",message:e.t0.message,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function u(e,t){return o.apply(this,arguments)}function o(){return(o=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.Ap+"?word="+t+"&translate="+r,{method:"GET"});case 3:return a=e.sent,e.next=6,a.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:"A990",message:e.t0.message,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function l(){return p.apply(this,arguments)}function p(){return(p=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.qH,{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:"A990",message:e.t0.message,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.TO+"?crypto="+t,{method:"GET"});case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:"A990",message:e.t0.message,data:{indicators:{quote:[]},timestamp:[]}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function f(e,t,r){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var c,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.P3+"?word="+t+"&size="+r+"&skip="+a,{method:"GET"});case 3:return c=e.sent,e.next=6,c.json();case 6:return i=e.sent,e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{code:"A990",message:e.t0.message,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},4545:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(4165),a=r(5861),s=r(9439),c=r(2791),i={main:"CrawlCNN_main__0pTin",body:"CrawlCNN_body__I2tqG",background:"CrawlCNN_background__73+r-",list:"CrawlCNN_list__d9VQR",list_container:"CrawlCNN_list_container__HtSjY",chart_container:"CrawlCNN_chart_container__fS7Lq"},u=r(1087),o=r(184);function l(e){var t=e.headline,r=e.category,n=e.url,a=e.lastPublish,s=(0,o.jsx)(o.Fragment,{});return null!==r&&""!==r&&(s=(0,o.jsxs)("b",{children:["[",r,"] "]})),(0,o.jsx)("tr",{children:(0,o.jsx)("td",{children:(0,o.jsxs)(u.OL,{className:"nav-link",to:n,children:[s,t," - ",new Date(a).toISOString().slice(0,10)]})})})}var p=r(4261);function d(e){var t=e.listData;return(0,o.jsx)("div",{children:(0,o.jsx)("table",{cellPadding:"2",border:1,className:i.list,children:(0,o.jsx)("tbody",{children:t.map((function(e){var t=e.headline,r=e.url,n=e.category,a=e.lastPublish;return(0,o.jsx)(l,{headline:t,category:n,url:r,lastPublish:a},(0,p.Z)())}))})})})}var h=r(3539),f=r(4349),b=r(3623),g=r(3421),x=r(5967),m=r(8279);function v(){var e=(0,c.useRef)(null),t=(0,c.useRef)(null),r=(0,c.useState)(!1),u=(0,s.Z)(r,2),l=u[0],p=u[1],x=(0,c.useState)(""),v=(0,s.Z)(x,2),y=v[0],w=v[1],F=(0,c.useState)([]),k=(0,s.Z)(F,2),j=k[0],N=k[1],Z=(0,c.useState)([]),_=(0,s.Z)(Z,2),C=_[0],S=_[1],A=(0,c.useState)({datasets:[]}),D=(0,s.Z)(A,2),E=D[0],T=D[1],O=(0,h.Z)();(0,c.useEffect)((function(){for(var e=new Map,t=new Date,r=0;r<30;r++)t.setDate(t.getDate()-1),e.set(t.toISOString().slice(0,10),{total:0,categrays:new Map});R(e,S)}),[]),(0,c.useEffect)((function(){t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[j]),(0,c.useEffect)((function(){if(e.current){for(var t=[],r=new Map,n=0;n<C.length;n++)t[n]=C[n].label.substring(5),C[n].categrays.forEach((function(e,t){var n;"<null>"!==t&&r.set(t,(null!==(n=r.get(t))&&void 0!==n?n:0)+e)}));var a=[];r.forEach((function(e,t){a.push({key:t,value:e})})),a.sort((function(e,t){return t.value-e.value}));var s="",c="",i="";a.length>1&&(s=a[0].key),a.length>2&&(c=a[1].key),a.length>3&&(i=a[2].key);for(var u=Array(C.length),o=Array(C.length),l=Array(C.length),p=Array(C.length),d=function(e){u[e]=0,o[e]=0,l[e]=0,p[e]=0,C[e].categrays.forEach((function(t,r){r===s?u[e]+=t:r===c?o[e]+=t:r===i?l[e]+=t:p[e]+=t}))},h=0;h<C.length;h++)d(h);var f=new Array;p.reduce((function(e,t){return e+t}),0)&&f.push({label:"other",data:p,backgroundColor:"rgba(255, 255, 200)"}),""!==s&&f.push({label:s,data:u,backgroundColor:"rgba(255, 120, 98)"}),""!==c&&f.push({label:c,data:o,backgroundColor:"rgba(42, 220, 255)"}),""!==i&&f.push({label:i,data:u,backgroundColor:"rgba(195, 60, 220)"}),T({labels:t,datasets:f})}}),[C]);var G,P={layout:{padding:20},plugins:{legend:{position:"top",display:!0,align:"start",labels:{color:"#FFFFFF80",usePointStyle:!0}},title:{color:"#FFFFFFBB",display:!0,text:O.formatMessage({id:"crawlCNN.chartTitle"})}},responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,scales:{x:{stacked:!0,beginAtZero:!0,grid:{drawBorder:!0,color:"#FFFFFF20"},ticks:{precision:0,color:"#FFFFFF80"},border:{color:"#FFFFFF80"}},y:{stacked:!0,beginAtZero:!0,suggestedMin:10,grid:{drawBorder:!0,color:"#FFFFFF20"},ticks:{precision:0,color:"#FFFFFF80"},border:{color:"#FFFFFF80"}}}};function M(e,t,r){return I.apply(this,arguments)}function I(){return I=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var s,c,i,u,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=new Map,c=new Date,i=0;i<30;i++)c.setDate(c.getDate()-1),s.set(c.toISOString().slice(0,10),{total:0,categrays:new Map});R(s,S),100,u=0,o=!0,l=(0,n.Z)().mark((function e(){var a,i,l,p,d,h,f,b,x;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.fO)(t,100,u);case 2:if("0000"===(a=e.sent).code){e.next=5;break}return e.abrupt("return","break");case 5:if(0!==a.data.length){e.next=7;break}return e.abrupt("return","break");case 7:i=a.data,l=0;case 9:if(!(l<i.length)){e.next=18;break}if(!(new Date(i[l].lastPublish)<c)){e.next=15;break}return i.length=l,o=!1,e.abrupt("break",18);case 15:l++,e.next=9;break;case 18:for(r((function(e){return e.concat(i)})),p=0;p<i.length;p++)d=new Date(i[p].firstPublish).toISOString().slice(0,10),void 0!==(h=s.get(d))&&(x=null!==(f=i[p].category)&&void 0!==f?f:"<null>",h.categrays.set(x,(null!==(b=h.categrays.get(x))&&void 0!==b?b:0)+1),s.set(d,{total:h.total+1,categrays:h.categrays}));R(s,S),u+=100;case 22:case"end":return e.stop()}}),e)}));case 8:if(!(o&&u<1e3)){e.next=15;break}return e.delegateYield(l(),"t0",10);case 10:if("break"!==e.t0){e.next=13;break}return e.abrupt("break",15);case 13:e.next=8;break;case 15:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function R(e,t){var r=[];e.forEach((function(e,t){r.push({label:t,total:e.total,categrays:e.categrays})})),r.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0})),t(r)}function q(){return(q=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),N([]),p(!0),e.next=5,M(y,N,S);case 5:p(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return G=l?(0,o.jsx)("button",{type:"submit",className:"btn btn-primary w-100 h-100 px-2 disabled",children:(0,o.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})}):(0,o.jsx)("button",{type:"submit",className:"btn btn-primary w-100 h-100",children:(0,o.jsx)(f.Z,{id:"crawlCNN.summit"})}),(0,o.jsx)("div",{children:(0,o.jsxs)("main",{className:i.main,children:[(0,o.jsx)("h3",{children:(0,o.jsx)(f.Z,{id:"crawlCNN.title"})}),(0,o.jsxs)("div",{className:i.body,children:[(0,o.jsx)("div",{className:i.background}),(0,o.jsxs)(m.E.div,{initial:"offscreen",whileInView:"onscreen",transition:{duration:.5},variants:{offscreen:{opacity:0},onscreen:{opacity:1}},children:[(0,o.jsxs)("form",{onSubmit:function(e){return q.apply(this,arguments)},className:"row align-items-sm-stretch",children:[(0,o.jsx)("div",{className:"col-sm-10 col-md-9 p-2",children:(0,o.jsxs)("div",{className:"input-group input-group-sm h-100",children:[(0,o.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:(0,o.jsx)(f.Z,{id:"crawlCNN.keyword"})}),(0,o.jsx)("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",value:y,onChange:function(e){return w(e.target.value)}})]})}),(0,o.jsx)("div",{className:"col-sm-10 col-md-3 p-2",children:G})]}),(0,o.jsx)("ul",{className:"txt-tip1",children:(0,o.jsx)("li",{children:(0,o.jsx)(f.Z,{id:"crawlCNN.description"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:i.list_container+" bg-secondary w-100",ref:t,children:(0,o.jsx)(d,{listData:j})}),(0,o.jsx)("div",{className:i.chart_container,children:(0,o.jsx)(b.$Q,{ref:e,options:P,data:E})})]})]})]})]})})}x.kL.register(x.vn,x.ZL,x.ST,x.jn,x.od,x.f$,x.Dx,x.uw,x.De)}}]);
//# sourceMappingURL=545.120eadd5.chunk.js.map